<!DOCTYPE html>
<html lang="en">
 <head>
  <title>
   Django registration in no time!
  </title>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <link href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css" rel="stylesheet"/>
  <link href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css" rel="stylesheet"/>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet"/>
  <link href="//iffm.me/theme/css/main.css" rel="stylesheet"/>
  <link href="127.0.0.1:8000/feeds/all.atom.xml" rel="alternate" title="/dev/isra/blog/* Full Atom Feed" type="application/atom+xml"/>
  <link href="127.0.0.1:8000/feeds/main.xml" rel="alternate" title="/dev/isra/blog/* Atom Feed" type="application/atom+xml"/>
  <link href="127.0.0.1:8000/feeds/{slug}.atom.xml" rel="alternate" title="/dev/isra/blog/* Categories Atom Feed" type="application/atom+xml"/>
  <link href="iffm.me/django-registration-in-no-time.html" rel="canonical"/>
  <script type="application/ld+json">
   {"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "/dev/isra/blog/*", "item": "iffm.me"}, {"@type": "ListItem", "position": 2, "name": "Django registration in no time", "item": "iffm.me/django-registration-in-no-time.html"}]}
  </script>
  <script type="application/ld+json">
   {"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Israel Fermín Montilla"}, "publisher": {"@type": "Organization", "name": "/dev/isra/blog/*"}, "headline": "Django registration in no time!", "about": "Blog", "datePublished": "2018-01-23 00:00"}
  </script>
 </head>
 <body>
  <div class="navigation pure-menu pure-menu-horizontal">
   <a class="pure-menu-heading pure-menu-link" href="iffm.me/">
    /dev/isra/blog/*
   </a>
   <ul class="pure-menu-list">
    <li class="pure-menu-item">
    </li>
    <li class="pure-menu-item">
     <a class="pure-menu-link" href="iffm.me/pages/about-me.html">
      About me...
     </a>
    </li>
    <li class="pure-menu-item">
     <a class="pure-menu-link" href="iffm.me/pages/consulting.html">
      Consulting
     </a>
    </li>
    <li class="pure-menu-item">
     <a class="pure-menu-link" href="iffm.me/pages/now.html">
      Now
     </a>
    </li>
    <li class="pure-menu-item">
     <a class="pure-menu-link" href="iffm.me/pages/talks.html">
      Talks
     </a>
    </li>
    <li class="pure-menu-item pure-menu-selected">
     <a class="pure-menu-link" href="iffm.me/category/blog.html">
      Blog
     </a>
    </li>
    <li class="pure-menu-item">
     <a class="pure-menu-link" href="iffm.me/category/espanol.html">
      Español
     </a>
    </li>
   </ul>
  </div>
  <div class="page-container">
   <div class="entry-content">
    <div class="post-meta pure-g">
     <div class="pure-u-3-4 meta-data">
      <a class="category" href="iffm.me/category/blog.html">
       Blog
      </a>
      <br/>
      <a class="author" href="iffm.me/author/israel-fermin-montilla.html">
       Israel Fermín Montilla
      </a>
      —
      <abbr title="2018-01-23T00:00:00+04:00">
       Tue 23 January 2018
      </abbr>
     </div>
    </div>
   </div>
   <div class="article-header-container">
    <div class="background-image-container">
     <div class="background-image" style="background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url(https://dl.dropboxusercontent.com/s/h4co8r0y2yz7j9l/user-registration.jpg);">
      <img alt="Django registration in no time!" src="https://dl.dropboxusercontent.com/s/h4co8r0y2yz7j9l/user-registration.jpg"/>
      <div class="title">
       <h1>
        Django registration in no time!
       </h1>
       <h2>
        Getting it done quick!
       </h2>
      </div>
     </div>
    </div>
   </div>
   <div class="entry-content">
    <p>
     What does 99% of the projects we work on have in common?, what's usually the first or the last
thing we start working on when building something, a personal project perhaps?. If you said
     <em>
      dealing with users
     </em>
     , that's right. On each and every project we find ourselves writing different
registration or authentication flows, sometimes we use third party authentication services like
     <em>
      Google
     </em>
     or
     <em>
      facebook
     </em>
     via their
     <em>
      API
     </em>
     s, but most of the times I'd say we start by asking our user's
to register using their
     <code>
      email
     </code>
     and a
     <code>
      password
     </code>
     .
    </p>
    <h2>
     Common approaches
    </h2>
    <p>
     There are several approaches to user registration, we can do it on a single step, or we can do it on
2 steps with a confirmation email being sent to the given address. There are several ways you can structure
your registration flow, either two simple questions (
     <code>
      email
     </code>
     and
     <code>
      password
     </code>
     ) or multiple questions through
several pages, you name it, we always write user registration flows.
    </p>
    <p>
     Is you ask me, I've always preferred to write a simple one, ask for an
     <code>
      email
     </code>
     and a
     <code>
      password
     </code>
     and ask for the
rest of the information I need on a separate
     <em>
      User Profile
     </em>
     page, things like name, date of birth, country, city,
mobile number or other stuff I might need. But you want as least friction as possible on the registration process,
specially if you're trying to get your first users, that's why I don't even send confirmation emails when I just launched
something. I start asking for confirmation when I already got some users and I have people constantly signing up, otherwise,
it's not worth the effort or the network traffic, plus the complexity of sending it asynchronously with a message queue.
    </p>
    <p>
     That's why I thought of writing a reusable django app to solve this, I was working on it for a while, taking the good parts
of all the registration flows I've written, until I found
     <code>
      django-registration
     </code>
     and just switched to that library.
    </p>
    <h2>
     Enter django-registration
    </h2>
    <p>
     This is way better that anything I could have written myself, it's being used by many people, has an active maintainer, works
out of the box and supports single and two steps registration flows so, why
     <em>
      reinventing the wheel
     </em>
     if it's already there?,
I'm using it for a couple of personal projects I'll be in the upcoming months (or not... you know...) and it's
incredible how easy it makes it to implement user registration, allowing me to start working on actual features and functionality
in almost no time.
    </p>
    <p>
     Let's get started
    </p>
    <h3>
     Installation
    </h3>
    <p>
     To install it, you just need to
     <code>
      pip
     </code>
     it as any usual
     <em>
      Python
     </em>
     module
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="err">pip install django-registration</span>
</code></pre>
    </div>
    <p>
     For the simple
     <em>
      one step
     </em>
     registration flow or the
     <em>
      HMAC Based
     </em>
     workflow, you don't need to do anything else.
    </p>
    <h3>
     Registration workflows
    </h3>
    <p>
     <em>
      django-registration
     </em>
     , supports three different workflows:
    </p>
    <ul>
     <li>
      <strong>
       One step:
      </strong>
      this workflow consists of as few steps as possible, the user signs up by filling the registration form,
after submitting, the account is created without any intermediate verification and the user is logged in automatically.
     </li>
     <li>
      <strong>
       HMAC Based:
      </strong>
      it's a two steps registration workflow that doesn't store any verification key, it sends instead a
timestamped HMAC verified value to the user via email in order to verify the account.
     </li>
     <li>
      <strong>
       Model based:
      </strong>
      to use this workflow, you'll have to add
      <code>
       registration
      </code>
      to your
      <code>
       INSTALLED_APPS
      </code>
      as you will need
to install one model to perform the verification step. If you need a two steps account creation because you require email
verification, the recommended way is to use the
      <em>
       HMAC
      </em>
      flow.
     </li>
    </ul>
    <p>
     The basic
     <em>
      one step
     </em>
     registration flow is the easiest way to register new users, if you're just deploying something for fun
and it's intended mostly for your personal use but want to allow other people to use it, I don't think you need to verify
email and go through all that hassle unless you get serious about it, so in my case, the intended user for my project is just myself,
but if someone else wants to use it, I'm OK with that, I assume if you want to use something you'll just provide a legit email
because it's on your own interest.
    </p>
    <h3>
     Settings everything up
    </h3>
    <p>
     I decided to go for a
     <em>
      one step
     </em>
     flow, as I don't really care if anyone provides an nonexistent email, I'm the one who will mostly
be using this, so, I guess it's OK,
     <em>
      django-registration
     </em>
     allows me to restrict new accounts from being created just by adding
     <code>
      REGISTRATION_OPEN = False
     </code>
     on my
     <code>
      settings.py
     </code>
     file.
    </p>
    <p>
     Each registration flow comes with its own set of views and urls and you'll have to create your custom template and form if you needed,
you'll most probably end up customizing some behavior, but it's really easy to do, most of the core, boring and repetitive work
of creating the registration workflow is done for you and works out of the box.
    </p>
    <p>
     In this case, for the
     <em>
      one step
     </em>
     all I had to do was the following:
    </p>
    <p>
     1.- Include
     <code>
      registration.backends.simple.urls
     </code>
     in my urls configuration
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">include</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># Some url patterns</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">'accounts/'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s1">'registration.backends.simple.urls'</span><span class="p">)),</span>
    <span class="c1"># More url patterns</span>
<span class="p">]</span>
</code></pre>
    </div>
    <p>
     2.- Set
     <code>
      REGISTRATION_OPEN = True
     </code>
     , this is the default value, but
     <em>
      better explicit than implicit
     </em>
    </p>
    <p>
     3.- By default, after successful registration the user will be redirected to
     <code>
      /
     </code>
     , but you can customize this behavior by
subclassing
     <code>
      registration.backends.simple.views.RegistrationView
     </code>
     and overriding the method
     <code>
      get_success_url()
     </code>
     , in my case,
redirecting to
     <code>
      /
     </code>
     is fine.
    </p>
    <p>
     4.- By default,
     <em>
      django-registration
     </em>
     will use
     <code>
      registration.forms.RegistrationForm
     </code>
     , this can be overridden by supplying your
own
     <code>
      form_class
     </code>
     argument when adding the default
     <code>
      RegistationView
     </code>
     to the
     <code>
      urlpatterns
     </code>
     or by subclassing it and setting the
     <code>
      form_class
     </code>
     attribute or implementing
     <code>
      get_form_class()
     </code>
     . In my case, I opted for passing an argument to the
     <code>
      as_view()
     </code>
     method when addind the
corresponding
     <code>
      url
     </code>
     .
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="kn">from</span> <span class="nn">registration.backends.simple.views</span> <span class="kn">import</span> <span class="n">RegistrationView</span>

<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">include</span>

<span class="kn">from</span> <span class="nn">.forms</span> <span class="kn">import</span> <span class="n">UserRegistrationForm</span>


<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># Some url patterns</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">'accounts/register/$'</span><span class="p">,</span> <span class="n">RegistrationView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(</span>
        <span class="n">form_class</span><span class="o">=</span><span class="n">UserRegistrationForm</span>
    <span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">'accounts/'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s1">'registration.backends.simple.urls'</span><span class="p">)),</span>
    <span class="c1"># More url patterns</span>
<span class="p">]</span>
</code></pre>
    </div>
    <p>
     5.- Customize the registration template, this flow only needs one template called
     <code>
      registration/registration_form.html
     </code>
     and it will
pick it up automatically, the
     <code>
      RegistrationView
     </code>
     will add the
     <code>
      form
     </code>
     variable to the
     <code>
      context
     </code>
     and it will contain a
     <code>
      RegistrationForm
     </code>
     instance,
all for free.
    </p>
    <h2>
     Recommended readings
    </h2>
    <ul>
     <li>
      <a href="https://django-registration.readthedocs.io/en/2.4.1/index.html">
       <em>
        django registration
       </em>
       docs
      </a>
     </li>
     <li>
      Django docs on
      <a href="https://docs.djangoproject.com/en/2.0/topics/class-based-views/">
       class based views
      </a>
     </li>
    </ul>
   </div>
   <footer>
    <div class="tags">
     <a href="iffm.me/tag/python.html">
      python
     </a>
     <a href="iffm.me/tag/django.html">
      django
     </a>
     <a href="iffm.me/tag/tutorial.html">
      tutorial
     </a>
     <a href="iffm.me/tag/registration.html">
      registration
     </a>
    </div>
    <div class="pure-g post-footer">
     <div class="pure-u-1 pure-u-md-1-2">
      <div class="pure-g poster-info">
       <div class="pure-u">
        <a href="iffm.me/author/israel-fermin-montilla.html">
         <img alt="" src="https://dl.dropboxusercontent.com/s/1bvnowsfke4rs2k/isra.jpg"/>
        </a>
       </div>
       <div class="pure-u-3-4">
        <h3 class="author-name">
         <a href="iffm.me/author/israel-fermin-montilla.html">
          Israel Fermín Montilla
         </a>
        </h3>
        <p class="author-description">
         {' Full time husband and dad who loves technology and programming. Software Engineer @ Careem / Online Mentor @ codeinstitute.net'}
        </p>
       </div>
       <style>
        .bmc-button img{height: 34px !important;width: 35px !important;margin-bottom: 1px !important;box-shadow: none !important;border: none !important;vertical-align: middle !important;}.bmc-button{padding: 7px 10px 7px 10px !important;line-height: 35px !important;height:51px !important;min-width:217px !important;text-decoration: none !important;display:inline-flex !important;color:#FFFFFF !important;background-color:#FF813F !important;border-radius: 5px !important;border: 1px solid transparent !important;padding: 7px 10px 7px 10px !important;font-size: 28px !important;letter-spacing:0.6px !important;box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;margin: 0 auto !important;font-family:'Cookie', cursive !important;-webkit-box-sizing: border-box !important;box-sizing: border-box !important;-o-transition: 0.3s all linear !important;-webkit-transition: 0.3s all linear !important;-moz-transition: 0.3s all linear !important;-ms-transition: 0.3s all linear !important;transition: 0.3s all linear !important;}.bmc-button:hover, .bmc-button:active, .bmc-button:focus {-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;text-decoration: none !important;box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;opacity: 0.85 !important;color:#FFFFFF !important;}
       </style>
       <link href="https://fonts.googleapis.com/css?family=Cookie" rel="stylesheet"/>
       <a class="bmc-button" href="https://www.buymeacoffee.com/iferminm" target="_blank">
        <img alt="Buy me a coffee" src="https://cdn.buymeacoffee.com/buttons/bmc-new-btn-logo.svg"/>
        <span style="margin-left:15px;font-size:28px !important;">
         Buy me a coffee
        </span>
       </a>
      </div>
     </div>
    </div>
    <!-- Begin MailChimp Signup Form -->
    <link href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css"/>
    <style type="text/css">
     #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
            /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
            We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
    </style>
    <div id="mc_embed_signup">
     <form action="//iffm.us15.list-manage.com/subscribe/post?u=f9aa59a7fe24a1d24a95b2e41&amp;id=28de70c22b" class="validate" id="mc-embedded-subscribe-form" method="post" name="mc-embedded-subscribe-form" novalidate="" target="_blank">
      <div id="mc_embed_signup_scroll">
       <h2>
        Get notified
       </h2>
       <p class="author-description">
        Get an email whenever I post something or release something cool, I'm always working on something, don't miss it out!
       </p>
       <div class="indicates-required">
        <span class="asterisk">
         *
        </span>
        indicates required
       </div>
       <div class="mc-field-group">
        <label for="mce-EMAIL">
         Email Address
         <span class="asterisk">
          *
         </span>
        </label>
        <input class="required email" id="mce-EMAIL" name="EMAIL" type="email" value=""/>
       </div>
       <div class="mc-field-group">
        <label for="mce-FNAME">
         First Name
        </label>
        <input class="" id="mce-FNAME" name="FNAME" type="text" value=""/>
       </div>
       <div class="mc-field-group">
        <label for="mce-LNAME">
         Last Name
        </label>
        <input class="" id="mce-LNAME" name="LNAME" type="text" value=""/>
       </div>
       <div class="clear" id="mce-responses">
        <div class="response" id="mce-error-response" style="display:none">
        </div>
        <div class="response" id="mce-success-response" style="display:none">
        </div>
       </div>
       <!-- real people should not fill this in and expect good things - do not remove this or risk
                    form bot signups-->
       <div aria-hidden="true" style="position: absolute; left: -5000px;">
        <input name="b_f9aa59a7fe24a1d24a95b2e41_28de70c22b" tabindex="-1" type="text" value=""/>
       </div>
       <div class="clear">
        <input class="button" id="mc-embedded-subscribe" name="subscribe" type="submit" value="Subscribe"/>
       </div>
      </div>
     </form>
    </div>
    <script src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js" type="text/javascript">
    </script>
    <script type="text/javascript">
     (function($)
        {window.fnames = new Array(); window.ftypes = new
        Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';}(jQuery));var $mcj =
        jQuery.noConflict(true);
    </script>
    <!--End mc_embed_signup-->
   </footer>
   <div class="entry-content">
    <div id="disqus_thread">
    </div>
    <script type="text/javascript">
     var disqus_shortname = 'iferminmblog';
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
    </script>
    <noscript>
     Please enable JavaScript to view the
     <a href="https://disqus.com/?ref_noscript" rel="nofollow">
      comments powered by Disqus.
     </a>
    </noscript>
   </div>
  </div>
  <footer class="index-footer">
   <a href="iffm.me/" title="/dev/isra/blog/*">
    /dev/isra/blog/*
   </a>
   <a href="iffm.me/category/blog.html">
    Blog
   </a>
   <a href="iffm.me/category/espanol.html">
    Español
   </a>
   <a href="http://getpelican.com/">
    Pelican
   </a>
   <a href="http://python.org/">
    Python.org
   </a>
   <a href="http://jinja.pocoo.org/">
    Jinja2
   </a>
   <a href="127.0.0.1:8000/feeds/all.atom.xml">
    Atom
   </a>
  </footer>
  <script>
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-96148260-1', 'auto');
      ga('send', 'pageview');
  </script>
 </body>
</html>